// COPYRIGHT:
function findLatestTask(e,t){var n=[];for(var r in t)t[r].task.split(".")[0]==e&&n.push(t[r]);return n[0]}var dependencyTree={allTasks:[],activeTasks:[],scheduledTasks:[],completedTasks:[],completedData:[]};$.when($.get("/images/svg/tv.svg",function(e){$("#svg_image").html(e.children)}),$.get("/app/schedule/tasks",function(e){var t=$.parseJSON(e);for(var n in t)dependencyTree.allTasks.push(t[n].split(".")[0])}),$.get("/app/schedule/crew",function(e){var t=$.parseJSON(e);for(var n in t.busy)dependencyTree.activeTasks.push(t.busy[n].split(".")[0]),dependencyTree.allTasks.push(t.busy[n].split(".")[0])}),$.get("/app/schedule/doing",function(e){var t=$.parseJSON(e);for(var n in t)dependencyTree.activeTasks.push(n.split(".")[0]),dependencyTree.allTasks.push(n.split(".")[0])}),$.get("/app/schedule/todo",function(e){var t=$.parseJSON(e);for(var n in t)dependencyTree.scheduledTasks.push(t[n].name.split(".")[0]),dependencyTree.allTasks.push(t[n].name.split(".")[0])}),$.get("/app/schedule/success",function(e){data=$.parseJSON(e);for(var t in data)dependencyTree.completedTasks.push(data[t].task.split(".")[0]),dependencyTree.allTasks.push(data[t].task.split(".")[0]),dependencyTree.completedData.push(data[t])}),$.get("/app/schedule/failure",function(e){data=$.parseJSON(e);for(var t in data)dependencyTree.completedTasks.push(data[t].task.split(".")[0]),dependencyTree.allTasks.push(data[t].task.split(".")[0]),dependencyTree.completedData.push(data[t])})).then(function(){dependencyTree.completedData.sort(function(e,t){var n=new Date(e.timing.completed),r=new Date(t.timing.completed);return r-n});var e=[];dependencyTree.allTasks=Array.from(new Set(dependencyTree.allTasks)).sort();for(var t in dependencyTree.allTasks){var n=findLatestTask(dependencyTree.allTasks[t],dependencyTree.completedData);jQuery.inArray(dependencyTree.allTasks[t],dependencyTree.activeTasks)>=0?e.push({name:dependencyTree.allTasks[t],date:"",run_id:"",status:"active"}):jQuery.inArray(dependencyTree.allTasks[t],dependencyTree.scheduledTasks)>=0?e.push({name:dependencyTree.allTasks[t],date:"",run_id:"",status:"queued"}):jQuery.inArray(dependencyTree.allTasks[t],dependencyTree.completedTasks)>=0?e.push({name:dependencyTree.allTasks[t],date:n.timing.complete,run_id:n.runid,status:"complete"}):e.push({name:dependencyTree.allTasks[t],date:"",run_id:"",status:"idle"})}$("#tasks_table").html(HandlebarsTemplates.tasks_table(e));for(var t in e)setSvgActiveNode("tasks",e[t].name,e[t].status)});